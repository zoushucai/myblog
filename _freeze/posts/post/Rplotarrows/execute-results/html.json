{
  "hash": "1fe3e69de5a5feed5d25a7efe88a3f64",
  "result": {
    "markdown": "---\ntitle: R画带箭头的坐标轴\ndate: '2019-04-26'\ncategories: r\n---\n\n\n\n\n## R 语言画带箭头的坐标轴\n\n本质的方法：就是去掉原有的坐标轴，然后通过R的低等函数一步一步的画出坐标轴以及需要的曲线，以下是google到的几种方法：\n\n### 方法一\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##################  画带箭头的坐标轴\n## estimate curve\nx <- seq(-1,1.5,0.1);\ny <- c(1.3,1.32,1.33,1.32,1.25,1.1,0.7,0.5,0.4,0.38,0.4,0.41,0.42,0.43,0.44,0.4,0.3,0.1,0,-0.05,-0.1,-0.15,-0.2,-0.24,-0.28,-0.3);\nf <- splinefun(x,y);\n\n## calculate precise points along estimated curve\nx <- seq(-1,1.5,0.01);\ny <- f(x);\n\n## precompute limits\nxlim <- c(min(x),max(x));\nylim <- c(min(y)-0.4,max(y)+0.2);\n\n## set global plot params\npar(xaxs='i',yaxs='i',mar=c(1,1,3,3)+0.1); ## \"internal\" axis spacing, meaning no extended range, and slightly adjust margins\n\n## draw plot\nplot(NA,xlim=xlim,ylim=ylim,axes=F,ann=F); ## set plot bounds, no default ornaments\narrows(c(0,xlim[1]),c(ylim[1],0),c(0,xlim[2]),c(ylim[2],0),0.05); ## draw custom axes\nmtext('y',3,1,at=0,las=1,cex=0.8,family='serif'); ## y label\nmtext('x',4,1,at=0,las=1,cex=0.8,family='serif'); ## x label\nlines(x,y,col='#aaaacc'); ## draw line on top\n```\n\n::: {.cell-output-display}\n![](Rplotarrows_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n### 方法二：\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##  Simulate your data:\nx <- seq(-1, 3, by=0.01)\ny <- 0.5*x - 0.3*x^2 + 0.4*x^3\n\n##  Plot the polynomial function, removing axis ticks and bounding box,\n##    as well as the axis labels:\nplot(x, y, \n     type=\"l\", \n     xaxt='n', yaxt='n', \n     bty='n', \n     xlab='', ylab='', \n     col=\"blue\")# 画图\n\n##  Next add in your axis arrows:\n# 适当缩小坐标轴 \nsmall = 0.9\narrows(min(x)*small, 0, max(x)*small, 0, lwd=1, length=0.15)\narrows(0, min(y)*small, 0, max(y)*small, lwd=1, length=0.15)\n```\n\n::: {.cell-output-display}\n![](Rplotarrows_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n### 方法三\n\n在方法二的基础上进行进一步修改\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##  Simulate your data:\nx <- seq(-1, 3, by=0.01)\ny <- 0.5*x - 0.3*x^2 + 0.4*x^3\n\n##  Plot the polynomial function, removing axis ticks and bounding box,\n##    as well as the axis labels:\nplot(x, y, \n     type=\"l\", \n     xaxt='n', yaxt='n', \n     bty='n', \n     xlab='', ylab='', \n     col=\"blue\")# 画图\n\n##  Next add in your axis arrows:\n# 适当缩小坐标轴 \nsmall = 0.9\narrows(min(x)*small, 0, max(x)*small, 0, lwd=1, length=0.15)\narrows(0, min(y)*small, 0, max(y)*small, lwd=1, length=0.15)\npar(family='STKaiti')\n\ntext(max(x), (max(y) - min(y))*0.1,'X轴')\n\ntext((max(x)-min(x))*0.1, max(y),'Y轴')\n\n# 画标度---x 标度\nk1 =ceiling(range(x)[1]*small)\nk2 = floor(range(x)[2] *small )\nk = 0.5 #k为刻度\nfor (i in seq(k1,k2,k)) {\n  n=10\n  if(i == 0 ) next()\n  lines(rep(i,n),seq(0,k*0.3,length.out = n),type = \"l\")# 垂直X轴的直线长度\n  \n  text(i,-(max(x) - min(x) )*0.1,i)\n  \n}\n\n\n# 画标度---y 标度\nk1 =ceiling(range(y)[1]*small) \nk2 = floor(range(y)[2]*small)\nk = 1\nfor (i in seq(k1,k2,k)) { # 坐标轴的间隔，以1为单位,k为刻度\n  n=10\n  if(i == 0 ) next()\n  lines(seq(0,k*0.01,length.out = n),rep(i,n),type = \"l\")\n  text(-0.02*(max(x)-min(x) ),i,i)\n}\n## 画原点\ntext(-(max(x) - min(x))*0.03,-(max(y) - min(y))*0.03,\"O\",cex=1.3)\n```\n\n::: {.cell-output-display}\n![](Rplotarrows_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## 基本函数画多折线图\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt = seq(1,10,length.out = 10000)\nmatplot(t,cbind(sin(t),cos(t)),type ='b',pch = 19,cex = 0.1)\n```\n\n::: {.cell-output-display}\n![](Rplotarrows_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n#> R version 4.2.1 (2022-06-23)\n#> Platform: aarch64-apple-darwin20 (64-bit)\n#> Running under: macOS Monterey 12.5.1\n#> \n#> Matrix products: default\n#> BLAS:   /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRblas.0.dylib\n#> LAPACK: /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRlapack.dylib\n#> \n#> locale:\n#> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n#> \n#> attached base packages:\n#> [1] stats     graphics  grDevices utils     datasets  methods   base     \n#> \n#> loaded via a namespace (and not attached):\n#>  [1] digest_0.6.29     jsonlite_1.8.0    magrittr_2.0.3    evaluate_0.16    \n#>  [5] rlang_1.0.4       stringi_1.7.8     cli_3.3.0         rstudioapi_0.14  \n#>  [9] rmarkdown_2.16.1  tools_4.2.1       stringr_1.4.1     htmlwidgets_1.5.4\n#> [13] xfun_0.32         yaml_2.3.5        fastmap_1.1.0     compiler_4.2.1   \n#> [17] htmltools_0.5.3   knitr_1.40\n```\n:::\n",
    "supporting": [
      "Rplotarrows_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}